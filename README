# How to Run CP-SAT Cloud Provider Recommender

This guide explains how to run the CP-SAT constraint satisfaction cloud provider recommendation system.

## Prerequisites

### 1. Required Software
- **Python 3.9+** (you have Python 3.9 installed)
- **pip3** (Python package manager)

### 2. Required Python Libraries
Install all dependencies at once:

```bash
pip3 install pandas numpy scikit-learn openpyxl ortools
```

Or individually:
- `pandas` - Data handling and Excel file reading
- `numpy` - Numerical operations
- `scikit-learn` - Machine learning utilities
- `openpyxl` - Excel file format support
- `ortools` - Google OR-Tools CP-SAT constraint solver

### 3. Required Data File
Ensure this file exists in the CBS directory:
- `cloud_providers_ml_recommender_dataset_v1.xlsx` (25 cloud providers, 31 features)

---

## File 1: cloud_cpsat_recommender.py

### Description
Main CP-SAT recommender implementation with 5 built-in demo scenarios demonstrating different use cases.

### How to Run

**Navigate to CBS directory:**
```bash
cd /Users/mbavan200/Documents/MSBIT/AI-ASig/CBS
```

**Run the file:**
```bash
python3 cloud_cpsat_recommender.py
```

### What it Does
Runs 5 example scenarios automatically:
1. **Scenario 1:** Startup looking for free tier with AutoML
2. **Scenario 2:** Enterprise ML team needs H100 GPUs with Kubernetes
3. **Scenario 3:** Research lab needs TPU support with serverless inference
4. **Scenario 4:** Company needs multi-cloud support with A100 GPUs
5. **Scenario 5:** Looking for hyperscaler with comprehensive ML features

### Expected Output
For each scenario, you'll see:
- âœ… Constraint specifications
- âœ… Number of solutions found
- âœ… Provider details (name, category, GPU types, features)
- âœ… Full feature matrix for each recommended provider

### Example Output:
```
================================================================================
CP-SAT Cloud Provider Recommender - Example Scenarios
================================================================================

================================================================================
SCENARIO 1: Startup looking for free tier with AutoML capabilities
================================================================================

Constraints: {'needs_free_tier': True, 'requires_automl': True, ...}

âœ… Found 2 solution(s):

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Solution #1: 3 provider(s)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ”¹ Provider: Google Cloud Platform (GCP)
   Category: Hyperscaler
   ML Service: Vertex AI
   GPUs: V100, P100, T4, A100, TPU v2-v5
   ...
```

### Runtime
- Execution time: ~2-5 seconds
- Solves multiple constraint satisfaction problems
- Enumerates all valid solutions (up to 5 per scenario)

---

## File 2: demo_ABC_scenario.py

### Description
Realistic enterprise demo simulating ABC Corporation selecting cost-effective GPU providers for long-term use (3-5 years).

### How to Run

**Navigate to CBS directory:**
```bash
cd /Users/mbavan200/Documents/MSBIT/AI-ASig/CBS
```

**Run the file:**
```bash
python3 demo_ABC_scenario.py
```

### What it Does
Simulates 3 test cases for ABC Corporation:

1. **Test Case 1: Cost Optimization Focus**
   - Prioritize: Reserved pricing, spot instances, A100 GPUs
   - Business goal: Minimize infrastructure costs
   
2. **Test Case 2: Balanced Approach**
   - Requirements: H100 GPUs, all enterprise features
   - Business goal: Balance cost and capabilities
   
3. **Test Case 3: Multi-Cloud Strategy**
   - Requirements: Multi-cloud support, global presence, Kubernetes
   - Business goal: Avoid vendor lock-in

### Expected Output
For each test case, you'll see:
- ğŸ“Š Business context and requirements
- ğŸ”§ Constraint specifications
- âœ… Recommended providers with full details
- ğŸ’° Cost analysis (scoring from 0-10)
- ğŸ“ˆ Feature scoring (0-10)
- ğŸ¯ Final recommendation with cloud distribution strategy

### Example Output:
```
================================================================================
DEMO: ABC ENTERPRISE GPU PROVIDER SELECTION
================================================================================

ğŸ“Š BUSINESS CONTEXT:
   Company: ABC Corporation
   Industry: Telecommunications & Media
   Team Size: 50+ data scientists & ML engineers
   Budget: $2-5M annually for ML infrastructure
   Timeline: Long-term (3-5 year commitment)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TEST CASE 1: Cost Optimization Focus                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ”§ CONSTRAINTS:
   âœ“ GPU Type: A100 (cost-effective for most workloads)
   âœ“ Spot Instances: Required (50-70% cost savings)
   âœ“ Reserved/Committed Pricing: Required
   ...

âœ… RECOMMENDED PROVIDERS:

ğŸ”¹ Provider: Google Cloud Platform (GCP)
   ğŸ’° Cost Score: 10/10
   ğŸ“ˆ Feature Score: 8/10
   ğŸ¯ Total Score: 18/20
   ...
```

### Runtime
- Execution time: ~3-8 seconds
- Processes 3 test cases
- Includes post-processing cost/feature scoring

---

## Quick Start Commands

```bash
# Navigate to directory
cd /Users/mbavan200/Documents/MSBIT/AI-ASig/CBS

# Run basic scenarios
python3 cloud_cpsat_recommender.py

# Run enterprise demo
python3 demo_ABC_scenario.py

# Run automated tests (optional - validates system)
python3 test_cpsat_recommender.py
```

---

## Troubleshooting

### Error: "ModuleNotFoundError: No module named 'ortools'"
**Solution:**
```bash
pip3 install ortools
```

### Error: "FileNotFoundError: cloud_providers_ml_recommender_dataset_v1.xlsx"
**Solution:**
Ensure you're running from the CBS directory:
```bash
cd /Users/mbavan200/Documents/MSBIT/AI-ASig/CBS
python3 cloud_cpsat_recommender.py
```

### Error: "No providers found satisfying all constraints"
**Reason:** Constraints are too restrictive (no provider matches ALL requirements)

**Solution:** This is valid CP-SAT behavior. Try relaxing some constraints.

---

## Understanding the Output

### âœ… Success Indicators
- "Found X solution(s)" - CP-SAT successfully found providers
- Provider details with all features listed
- Multiple solutions show alternative options

### âŒ Constraint Satisfaction Failure
- "No providers found satisfying all constraints!"
- Means: No single provider matches ALL your requirements
- Action: Relax constraints or consider multi-provider strategy

### ğŸ”¹ Provider Information Explained
- **Category:** Hyperscaler (AWS/Azure/GCP) vs GPU Cloud vs AI Platform
- **ML Service:** Main machine learning platform name
- **GPUs:** Available GPU types (V100, A100, H100, etc.)
- **TPU Support:** Google TPU availability
- **Pricing Models:** On-Demand, Spot, Reserved, Committed
- **AutoML:** Automated machine learning support
- **Kubernetes:** Container orchestration support
- **Managed Notebooks:** Jupyter/notebook environments
- **Serverless Inference:** Pay-per-request inference
- **Free Tier:** Trial or free tier availability

---

## Performance Metrics

Based on testing:
- **Constraint Satisfaction Accuracy:** 100% (all constraints guaranteed)
- **Precision:** 100% (no false positives)
- **Recall:** 100% (no missed valid solutions)
- **Average Solve Time:** < 1 second per scenario
- **Max Solutions:** Configurable (default: 5)

---

## Next Steps

1. âœ… Run both files to see how CP-SAT works
2. âœ… Review the output to understand constraint satisfaction
3. âœ… Modify constraints in the code to test different scenarios
4. âœ… Read the documentation files:
   - `CP_SAT_MODEL_EXPLANATION.md` - Technical details
   - `COMCAST_DEMO_SUMMARY.md` - Enterprise demo analysis
   - `TESTING_AND_EVALUATION.md` - Evaluation metrics
   - `CP_SAT_FEATURE_WEIGHTS_EXPLANATION.md` - Weight vs constraint comparison

---

## Custom Scenarios

To create your own scenario, modify the constraints dictionary:

```python
custom_constraints = {
    'gpu_type': 'A100',              # A100, H100, V100
    'requires_kubernetes': True,      # Boolean constraints
    'requires_automl': True,
    'requires_spot_instances': True,
    'category': 'hyperscaler',       # hyperscaler, gpu_cloud, ai_platform
    'must_be_global': True,          # Global coverage required
}

recommender = CloudProviderRecommender('cloud_providers_ml_recommender_dataset_v1.xlsx')
results = recommender.find_recommendations(custom_constraints, max_solutions=5)
```

---

## Support

For questions about:
- **CP-SAT logic:** See `CP_SAT_MODEL_EXPLANATION.md`
- **Testing methodology:** See `TESTING_AND_EVALUATION.md`
- **Enterprise demo:** See `COMCAST_DEMO_SUMMARY.md`
- **Comparison with CBR:** See `CP_SAT_FEATURE_WEIGHTS_EXPLANATION.md`

---

**Last Updated:** February 13, 2026
**Python Version:** 3.9+
**OR-Tools Version:** 9.15.6755+
